{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import Sidebar from\"./components/Sidebar\";import Topbar from\"./components/Topbar\";import MapView from\"./components/MapView\";import ComplaintsTable from\"./components/ComplaintsTable\";import AnalyticsPanel from\"./components/AnalyticsPanel\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API=\"http://localhost:8000\";// Backend URL\nexport default function App(){const[complaints,setComplaints]=useState([]);const[stats,setStats]=useState({});const[sidebarOpen,setSidebarOpen]=useState(false);useEffect(()=>{fetchAll();const interval=setInterval(fetchAll,15000);// Auto-refresh\nreturn()=>clearInterval(interval);},[]);const fetchAll=()=>{fetchComplaints();fetchStats();};const fetchComplaints=async()=>{try{const res=await axios.get(\"\".concat(API,\"/complaints\"));setComplaints(res.data);}catch(err){console.error(\"Error fetching complaints:\",err);}};const fetchStats=async()=>{try{const res=await axios.get(\"\".concat(API,\"/analytics\"));setStats(res.data);}catch(err){console.error(\"Error fetching analytics:\",err);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"overlay \".concat(sidebarOpen?\"show\":\"\"),onClick:()=>setSidebarOpen(false)}),/*#__PURE__*/_jsx(\"div\",{className:\"sidebar \".concat(sidebarOpen?\"open\":\"\"),children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"topbar\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"hamburger\",onClick:()=>setSidebarOpen(!sidebarOpen),children:\"\\u2630\"}),/*#__PURE__*/_jsx(Topbar,{stats:stats})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"left-col\",children:/*#__PURE__*/_jsx(MapView,{complaints:complaints})}),/*#__PURE__*/_jsxs(\"div\",{className:\"right-col\",children:[/*#__PURE__*/_jsx(AnalyticsPanel,{stats:stats,complaints:complaints}),/*#__PURE__*/_jsx(ComplaintsTable,{complaints:complaints,refresh:fetchComplaints})]})]})]})]});}","map":{"version":3,"names":["React","useEffect","useState","axios","Sidebar","Topbar","MapView","ComplaintsTable","AnalyticsPanel","jsx","_jsx","jsxs","_jsxs","API","App","complaints","setComplaints","stats","setStats","sidebarOpen","setSidebarOpen","fetchAll","interval","setInterval","clearInterval","fetchComplaints","fetchStats","res","get","concat","data","err","console","error","className","children","onClick","refresh"],"sources":["C:/Users/nisha/OneDrive/Desktop/civic-dashboard-frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\n\nimport Sidebar from \"./components/Sidebar\";\nimport Topbar from \"./components/Topbar\";\nimport MapView from \"./components/MapView\";\nimport ComplaintsTable from \"./components/ComplaintsTable\";\nimport AnalyticsPanel from \"./components/AnalyticsPanel\";\n\nconst API = \"http://localhost:8000\"; // Backend URL\n\nexport default function App() {\n  const [complaints, setComplaints] = useState([]);\n  const [stats, setStats] = useState({});\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n\n  useEffect(() => {\n    fetchAll();\n    const interval = setInterval(fetchAll, 15000); // Auto-refresh\n    return () => clearInterval(interval);\n  }, []);\n\n  const fetchAll = () => {\n    fetchComplaints();\n    fetchStats();\n  };\n\n  const fetchComplaints = async () => {\n    try {\n      const res = await axios.get(`${API}/complaints`);\n      setComplaints(res.data);\n    } catch (err) {\n      console.error(\"Error fetching complaints:\", err);\n    }\n  };\n\n  const fetchStats = async () => {\n    try {\n      const res = await axios.get(`${API}/analytics`);\n      setStats(res.data);\n    } catch (err) {\n      console.error(\"Error fetching analytics:\", err);\n    }\n  };\n\n  return (\n    <div className=\"app\">\n      <div\n        className={`overlay ${sidebarOpen ? \"show\" : \"\"}`}\n        onClick={() => setSidebarOpen(false)}\n      ></div>\n\n      <div className={`sidebar ${sidebarOpen ? \"open\" : \"\"}`}>\n        <Sidebar />\n      </div>\n\n      <div className=\"main\">\n        <div className=\"topbar\">\n          <span\n            className=\"hamburger\"\n            onClick={() => setSidebarOpen(!sidebarOpen)}\n          >\n            &#9776;\n          </span>\n          <Topbar stats={stats} />\n        </div>\n\n        <div className=\"content\">\n          <div className=\"left-col\">\n            <MapView complaints={complaints} />\n          </div>\n\n          <div className=\"right-col\">\n            {/* Removed ComplaintForm */}\n            <AnalyticsPanel stats={stats} complaints={complaints} />\n            <ComplaintsTable complaints={complaints} refresh={fetchComplaints} />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}