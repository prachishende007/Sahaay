{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nisha\\\\OneDrive\\\\Desktop\\\\civic-dashboard-frontend\\\\src\\\\components\\\\MapView.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\n\n// Optional: Fix default marker icon issue\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png')\n});\nconst MapView = () => {\n  _s();\n  const [complaints, setComplaints] = useState([]);\n  const fetchComplaints = async () => {\n    try {\n      const res = await axios.get('http://127.0.0.1:8000/complaints');\n      setComplaints(res.data);\n    } catch (error) {\n      console.error(\"Error fetching complaints:\", error);\n    }\n  };\n  useEffect(() => {\n    fetchComplaints(); // initial load\n    const interval = setInterval(fetchComplaints, 15000); // every 15s\n    return () => clearInterval(interval); // cleanup\n  }, []);\n  return /*#__PURE__*/_jsxDEV(MapContainer, {\n    center: [28.6139, 77.2090],\n    zoom: 10,\n    style: {\n      height: '80vh',\n      width: '100%'\n    },\n    children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n      attribution: \"\\xA9 <a href=\\\"https://osm.org/copyright\\\">OpenStreetMap</a>\",\n      url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), complaints.map(complaint => /*#__PURE__*/_jsxDEV(Marker, {\n      position: [complaint.lat, complaint.lng],\n      children: /*#__PURE__*/_jsxDEV(Popup, {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: complaint.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 47\n        }, this), \"Category: \", complaint.category, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 43\n        }, this), \"Status: \", complaint.status]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 11\n      }, this)\n    }, complaint.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 5\n  }, this);\n};\n_s(MapView, \"Q0n/ndeodrSyMT6TnAqmg/BjuLM=\");\n_c = MapView;\nexport default MapView;\nvar _c;\n$RefreshReg$(_c, \"MapView\");","map":{"version":3,"names":["React","useEffect","useState","axios","MapContainer","TileLayer","Marker","Popup","L","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","require","iconUrl","shadowUrl","MapView","_s","complaints","setComplaints","fetchComplaints","res","get","data","error","console","interval","setInterval","clearInterval","center","zoom","style","height","width","children","attribution","url","fileName","_jsxFileName","lineNumber","columnNumber","map","complaint","position","lat","lng","title","category","status","id","_c","$RefreshReg$"],"sources":["C:/Users/nisha/OneDrive/Desktop/civic-dashboard-frontend/src/components/MapView.js"],"sourcesContent":["\n\n\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\n\n// Optional: Fix default marker icon issue\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png'),\n});\n\nconst MapView = () => {\n  const [complaints, setComplaints] = useState([]);\n\n  const fetchComplaints = async () => {\n    try {\n      const res = await axios.get('http://127.0.0.1:8000/complaints');\n      setComplaints(res.data);\n    } catch (error) {\n      console.error(\"Error fetching complaints:\", error);\n    }\n  };\n\n  useEffect(() => {\n    fetchComplaints(); // initial load\n    const interval = setInterval(fetchComplaints, 15000); // every 15s\n    return () => clearInterval(interval); // cleanup\n  }, []);\n\n  return (\n    <MapContainer center={[28.6139, 77.2090]} zoom={10} style={{ height: '80vh', width: '100%' }}>\n      <TileLayer\n        attribution='&copy; <a href=\"https://osm.org/copyright\">OpenStreetMap</a>'\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      />\n\n      {complaints.map((complaint) => (\n        <Marker key={complaint.id} position={[complaint.lat, complaint.lng]}>\n          <Popup>\n            <strong>{complaint.title}</strong><br />\n            Category: {complaint.category}<br />\n            Status: {complaint.status}\n          </Popup>\n        </Marker>\n      ))}\n    </MapContainer>\n  );\n};\n\nexport default MapView;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}